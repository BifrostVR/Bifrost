<!DOCTYPE html> 
<html> 
    <head> 
        <!--Gurantees use of correct and updated characters for HTML5-->
        <meta charset="UTF-8">
        <title>Bifrost - The Metaverse at your Fingertips</title>
        <link rel="stylesheet" href="css/styles.css" type="text/css">
    </head> 
    <body>
        <header>
            <div class="logo">
                <img src="logo.png" alt="Bifrost Logo">
            </div>
            <div class="login">
                <a href="login.html"><img src="login.png" alt="Login"></a>
            </div>
        </header>
        <main>
            <div class="left-sidebar">
                <div class="user-info">
                    <div class="profile-picture">
                        <img src="picture.png" alt="Profile Picture">
                    </div>
                    <div class="left-sidebar-text">
                    </div>
                </div>
            </div>
        <div class="content">
            <div>
                <div class="create-post-container">
                    <form id="newPostForm">
                        <div class="welcome-text">
                            <p>Add to the Multiverse</p>
                        </div>
                        <div class="form-group">
                            <label for="post-textarea">What do you want to say...</label>
                            <input type="textarea" class="form-control" name="post-textarea" id="post-textarea"></textarea> 
                        </div>
                        <div class="form-group file-picker">
                            <label for="post-file">Attach a file...</label>
                            <input type="file" class="form-control" name="post-file" id="post-file"></textarea> 
                        </div>
                        <div class="create-post-button">
                            <button id="submitButton" class="btn btn-primary">Send</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="post-container">
                <div class="username">
                    <p>JohnDoe99</p>
                </div>
                <div class = "post-profile">
                    <img src="picture.png" />
                </div>
                <div class="like-counter" id = "like-counter" data-count="0">
                    <p>0 likes</p>
                    <div class = "like-button">
                        <img src="unliked.png" id="like-button" onclick="incrementLike()">
                        <script src="like.js"></script>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-sidebar">  
            <div class="friends-list">
                <div class="left-sidebar-text">
                    <p>Friends</p>
                    <div class="friend">
                        <img src="picture.png" alt="Profile Picture">
                        <p>Blake</p>
                    </div>
                </div>
            </div>
        </div>
        </main>
    </body>
    <script> 
        document.addEventListener("DOMContentLoaded", (event) => { 
            //alert("The page has been loaded."); 
        }); 
     
        document.getElementById("submitButton").addEventListener("click", async (e) => { 
            e.preventDefault(); 
            console.log("Submit button pressed");
            try { 
                const postTextArea = document.getElementById("post-textarea").value; 
                const postFile = document.getElementById("post-file").value;
     
                const userData = { 
                    postTextArea: postTextArea,
                    postFile: postFile,
                }; 
     
                const fetchConfigData = { 
                    method: "POST", 
                    body: JSON.stringify(userData),  
                    headers: { 
                        "Content-Type": "application/json" 
                    } 
                }; 
     
                const response = await fetch("/", fetchConfigData); 
             
                if(response.ok) { 
                    const games = await response.json(); 
                    loadTableWithGames(games); 
                } else { 
                    console.log("Error with the response data"); 
                } 
     
            } catch (err) { 
                console.log(`Error: ${err}`); 
            } 
        }); 
     
        function loadTableWithGames(games) { 
            const table = document.getElementById("gamesTable"); 
            const tableBody = table.children[1]; 
     
            tableBody.innerHTML = ""; 
     
            games.forEach(game => { 
                const tr = document.createElement("tr");
                const team1NameTd = document.createElement("td"); 
                team1NameTd.innerHTML = `${game["Team1Name"]}`; 
                const team1ScoreTd = document.createElement("td"); 
                team1ScoreTd.innerHTML = `${game["Team2Name"]}`;
                tr.appendChild(team1NameTd); 
                tr.appendChild(team1ScoreTd);
                tableBody.appendChild(tr); 
            }); 
        }
        </script>
</html>
